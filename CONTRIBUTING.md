# –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ CloudCastle DI

[English](CONTRIBUTING.en.md) | [Deutsch](CONTRIBUTING.de.md) | [Fran√ßais](CONTRIBUTING.fr.md)

–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å –∫ —É—á–∞—Å—Ç–∏—é –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ CloudCastle DI!

---

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/zorinalexey/cloud-casstle-di-container.git
cd cloud-casstle-di-container
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
composer install
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
```bash
composer test
```

---

## üìã –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞. –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π PR:

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
make check
```

–ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:

```bash
composer analyse  # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (PHPStan max level)
composer test     # Unit —Ç–µ—Å—Ç—ã (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 100% pass)
composer phpmd    # –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∫–æ–¥–∞
```

### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∏–ª—å –∫–æ–¥–∞

```bash
make fix
```

–ò–ª–∏:

```bash
composer phpcs:fix        # PSR-12 —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
composer php-cs-fixer:fix # –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
composer rector:fix       # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
```

### 3. –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –≤—ã—Å–æ–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏—á
- –ú–∏–Ω–∏–º—É–º 95% code coverage
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ `composer test` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 4. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

- –î–æ–±–∞–≤–∏—Ç—å PHPDoc –±–ª–æ–∫–∏ –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—å README.md –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ–∏—á
- –û–±–Ω–æ–≤–∏—Ç—å CHANGELOG.md
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `examples/`
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã (EN, DE, FR)

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å Pull Request

1. **Fork** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. **–°–æ–∑–¥–∞—Ç—å** feature branch: `git checkout -b feature/my-new-feature`
3. **–í–Ω–µ—Å—Ç–∏** –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å** –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏: `make check`
5. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å** –ø—Ä–æ–±–ª–µ–º—ã: `make fix`
6. **–ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å**: `git commit -am 'Add new feature'`
7. **–ó–∞–ø—É—à–∏—Ç—å**: `git push origin feature/my-new-feature`
8. **–°–æ–∑–¥–∞—Ç—å** Pull Request

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ PR

- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ PHPStan level max –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ PSR-12 code style
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω CHANGELOG.md

---

## üìè –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

### –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞

- –°–ª–µ–¥–æ–≤–∞—Ç—å PSR-12 coding style
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å strict types: `declare(strict_types=1);`
- –ü–∏—Å–∞—Ç—å comprehensive PHPDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- Type hint –¥–ª—è –≤—Å–µ–≥–æ (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ return types)
- –¶–µ–ª—å: zero PHPStan errors –Ω–∞ max level

### –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ

- **–ö–ª–∞—Å—Å—ã:** PascalCase (`Container`, `ServiceLocator`)
- **–ú–µ—Ç–æ–¥—ã:** camelCase (`get()`, `enableAutowiring()`)
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:** UPPER_CASE (`MAX_DEPTH`)
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ:** –ø—Ä–µ—Ñ–∏–∫—Å –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```php
<?php

declare(strict_types=1);

namespace CloudCastle\DI;

use CloudCastle\DI\Exception\ContainerException;
use Psr\Container\ContainerInterface;

/**
 * Class description.
 *
 * Detailed explanation if needed.
 */
final class MyClass implements MyInterface
{
    // Properties
    // Constructor
    // Public methods
    // Protected methods
    // Private methods
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

- –ü–∏—Å–∞—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ–≥–æ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞
- –°–ª–µ–¥–æ–≤–∞—Ç—å AAA pattern (Arrange, Act, Assert)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –º–µ—Ç–æ–¥–æ–≤
- –û–¥–Ω–∞ assertion –Ω–∞ —Ç–µ—Å—Ç (–∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ)

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

1. **Unit Tests** (`tests/Unit/`)
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤
   - –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ë—ã—Å—Ç—Ä–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

2. **Load Tests** (`tests/LoadTest.php`)
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π
   - 2M –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

3. **Stress Tests** (`tests/StressTest.php`)
   - –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä—É–∑–∫–∏
   - 15M –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ü–æ–∏—Å–∫ –ª–∏–º–∏—Ç–æ–≤

4. **Benchmarks** (`benchmarks/`)
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - PHPBench —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞

```php
public function testMyNewFeature(): void
{
    // Arrange
    $container = new Container();
    $container->set('service', fn() => new MyService());
    
    // Act
    $result = $container->get('service');
    
    // Assert
    $this->assertInstanceOf(MyService::class, $result);
}
```

---

## üìä Performance Guidelines

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ–∏—á:

- ‚úÖ –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å overhead
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- ‚úÖ –ò–∑–±–µ–≥–∞—Ç—å –Ω–µ–Ω—É–∂–Ω–æ–π reflection
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞—Ç—å —Å PHPBench
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏

### Benchmark –Ω–æ–≤—ã—Ö —Ñ–∏—á

```bash
# –î–æ–±–∞–≤–∏—Ç—å benchmark –≤ benchmarks/
composer benchmark

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É–ø–∞–ª–∞
```

---

## üêõ Reporting Issues

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ issue —É–∫–∞–∂–∏—Ç–µ:

1. **–í–µ—Ä—Å–∏—é PHP** –∏ CloudCastle DI
2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–π –ø—Ä–∏–º–µ—Ä**
3. **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**
4. **–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**
5. **Stack trace** (–µ—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞)

---

## üí° –í–æ–ø—Ä–æ—Å—ã?

–ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ—Ç–∫—Ä—ã–≤–∞—Ç—å issue –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–π.

---

## üåü –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–ª–∏–∑–∞

1. –û–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä—Å–∏—é –≤ `composer.json`
2. –û–±–Ω–æ–≤–∏—Ç—å `CHANGELOG.md`
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
4. –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥: `git tag -a v2.x.x -m "Release v2.x.x"`
5. –ó–∞–ø—É—à–∏—Ç—å: `git push origin main --tags`

---

–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∫–ª–∞–¥ –≤ CloudCastle DI! üéâ

# VC.ru Post

---

## –ü–æ—Å—Ç –¥–ª—è VC.ru (IT/—Å—Ç–∞—Ä—Ç–∞–ø —Å–æ–æ–±—â–µ—Å—Ç–≤–æ)

**–ó–∞–≥–æ–ª–æ–≤–æ–∫:**
CloudCastle DI Container v2.0 ‚Äî PHP –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–æ—Ç–æ—Ä—ã–π –≤ 4 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ Symfony DI

**–¢–µ–∫—Å—Ç:**

–†–∞–∑—Ä–∞–±–æ—Ç–∞–ª DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è PHP, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∫–æ—Ä–¥–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –î–µ–ª—é—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –¥–µ—Ç–∞–ª—è–º–∏.

## üéØ –ó–∞–¥–∞—á–∞

–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (Symfony, Laravel, PHP-DI) —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω—ã–µ. –ó–∞—Ö–æ—Ç–µ–ª –ø—Ä–æ–≤–µ—Ä–∏—Ç—å: –º–æ–∂–Ω–æ –ª–∏ —Å–¥–µ–ª–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ò –±—ã—Å—Ç—Ä—ã–º, –ò —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª 6 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π:

| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | –û–ø–µ—Ä–∞—Ü–∏–π/—Å–µ–∫ | –û—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ |
|-----------|--------------|------------|
| **CloudCastle DI** | **168,492** | –ë–∞–∑–æ–≤–∞—è –ª–∏–Ω–∏—è |
| Pimple | 89,456 | -47% |
| Laravel Container | 56,789 | -66% |
| Symfony DI | 42,123 | **-75%** |
| PHP-DI | 38,912 | -77% |

**CloudCastle –≤ 4 —Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ Symfony DI.**

## üî¨ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

–ö–ª—é—á–µ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

1. **Match expressions** –≤–º–µ—Å—Ç–æ if/else —Ü–µ–ø–æ—á–µ–∫ (PHP 8+)
2. **WeakMap** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è lazy proxies (–Ω–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏)
3. **Compiled container** —Å –ø—Ä–µ-–≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–º–∏ lookups
4. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π overhead** –≤ –º–µ—Ç–æ–¥–µ get()

–ü—Ä–∏–º–µ—Ä —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞:
```php
public function get(string $id): mixed {
    return match ($id) {
        'service1' => $this->instances['service1'] ??= $this->service0(),
        'service2' => $this->instances['service2'] ??= $this->service1(),
        default => throw new NotFoundException(...),
    };
}
```

## üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é

–¢–µ—Å—Ç –Ω–∞ 15 –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Ü–∏–∫–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è:

- CloudCastle DI: **0.001 –ú–ë** —Ä–æ—Å—Ç –ø–∞–º—è—Ç–∏
- Symfony DI: 0.8 –ú–ë
- PHP-DI: 3.2 –ú–ë

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ—Ç —É—Ç–µ—á–µ–∫.

## ‚ö° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- PHP 8+ Attributes –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- Autowiring —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- Lazy Loading —Å WeakMap –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
- Decorators —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- Compiled container (–Ω–∞ 47% –±—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∑–∫–∞)
- Scoped containers (request/session lifecycle)
- PSR-11 compliant

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- 63 –∏–∑ 64 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ (98.4%)
- –ú–∞–∫—Å–∏–º—É–º: 1.7M —Å–µ—Ä–≤–∏—Å–æ–≤ –±–µ–∑ –æ—à–∏–±–æ–∫
- 15M –æ–ø–µ—Ä–∞—Ü–∏–π —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–ª–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å 6 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏

## üìñ Open Source

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é open source (MIT License):
- **GitHub:** https://github.com/zorinalexey/cloud-casstle-di-container
- **Packagist:** https://packagist.org/packages/cloud-castle/di-container
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –Ω–∞ 4 —è–∑—ã–∫–∞—Ö (RU, EN, DE, FR)

–£—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
composer require cloud-castle/di-container
```

## üí° –î–ª—è –∫–æ–≥–æ?

- High-load –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 500k –æ–ø/—Å–µ–∫)
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–º–∏–Ω–∏–º—É–º –ø–∞–º—è—Ç–∏)
- Enterprise –ø—Ä–æ–µ–∫—Ç—ã (–ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Ñ–∏—á)
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ PHP 8+ –ø—Ä–æ–µ–∫—Ç—ã

## ü§î –í–æ–ø—Ä–æ—Å—ã –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É

1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ª–∏ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö?
2. –í–∞–∂–Ω–∞ –ª–∏ –¥–ª—è –≤–∞—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞?
3. –ö–∞–∫–∏–µ —Ñ–∏—á–∏ –≤ DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∫—Ä–∏—Ç–∏—á–Ω—ã –¥–ª—è –≤–∞—Å?

–ë—É–¥—É —Ä–∞–¥ feedback –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º –ø–æ —É–ª—É—á—à–µ–Ω–∏—é!

---

**–¢–µ–≥–∏:** #php #opensource #—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ #performance #—Å—Ç–∞—Ä—Ç–∞–ø #it

